# NPC HLC traffic documentation

NPC HLC traffic generates peds which walk and drive around. They are not intelligent yet. They try to avoid collisions, stop when traffic lights are red and drive fast on the highways. But they may cause huge traffic jams :) That is all they can do yet.

## NPC HLC traffic density controller

NPC HLC traffic density controller (npchlc_traffic_denctrl) is an example script which shows how to use NPC HLC traffic exported functions. You can use it to control density via command:
```
    /density [type] density: changes the density multiplier of the traffic type [type] (peds, cars, boats, planes), or all types, if skipped, to density.
```

## Meta.xml settings

`meta.xml` file has a setting `"check_collisions"`. It defines which elements should be checked for collisions when the traffic is being generated to prevent multiple vehicles from being created at the same position and getting stuck inside each other. `"all"` checks all peds, players and vehicles in the server and `"local"` only checks peds and vehicles which were generated by NPC HLC traffic resource. Any other value disables collision checking.

## Path files and maplist.xml

NPC HLC traffic can use paths from multiple files at the same time. Path map files have to be put into `paths/maps` folder of the resource. They also have to be included in the file `paths/maplist.xml`. They are included by putting a `map` node with a path name as `src` attribute. An example:
```
<maps>
    <map src="some_map1"/>
    <map src="some_map2"/>
</maps>
```

This adds `paths/maps/some_map1` and `paths/maps/some_map2` path maps into the server.

San Andreas paths map archive contains the ready `maplist.xml` file which is needed to load the paths. Put archive contents into `npchlc_traffic` resource folder to get the paths ready to use.

## Exported functions

When NPC HLC traffic resource is running, other resources can call its functions in this way:
```
exports.npchlc_traffic:functionName(arguments)
```

The list of all functions exported by NPC HLC traffic:
```
setTrafficDensity ([type], density)

Server-only function

Changes the traffic density.

    [type]: Traffic type which will have its density changed. Can be "peds", "cars", "boats" and "planes". It is an optional argument. If you skip it, all types will be affected.
    density: How many times more traffic there should be

Returns true if density has been changed, false if invalid arguments were given.
```

```
getTrafficDensity (type)

Server-only function

Gets the traffic density.

    type: Traffic type whose density you want to get.

Returns density, or false if invalid arguments were given.
```

*Original page for this resource available via web archive: https://web.archive.org/web/20161123022420/http://crystalmv.net84.net:80/pages/scripts/npchlc_traffic.php*
